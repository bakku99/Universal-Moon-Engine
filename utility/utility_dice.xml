<?xml version="1.0" encoding="iso-8859-1"?>

<!--
  Please see the license.html file included with this distribution for
  attribution and copyright information.
-->

<root>
	<windowclass name="diceselect">
		<frame>utilitybox</frame>
		<sizelimits>
			<minimum width="420" height="600" />
			<dynamic />
		</sizelimits>
		<helplinkres>help_tool_dice</helplinkres>
		<script file="utility/scripts/diceselect.lua" />
		<sheetdata>
			<windowtitlebar_utilitybox name="title" />
			<windowmenubar_utilitybox name="menubar" />

			<anchor_content_utilitybox_top />
			<anchor_content_utilitybox_bottom />

			<sub_content_framed_groupbox_bottom name="sub_controls">
				<class>diceselect_controls</class>
			</sub_content_framed_groupbox_bottom>

			<area_content_top name="area_controls_top">
				<anchored height="125" />
			</area_content_top>
			<subwindow name="sub_color">
				<anchored to="area_controls_top" position="insideright" offset="0,0" width="120" />
				<class>diceselect_color</class>
				<activate />
				<fastinit />
			</subwindow>
			<subwindow name="sub_active">
				<anchored to="area_controls_top" position="insideleft">
					<right parent="sub_color" anchor="left" />
				</anchored>
				<class>diceselect_active</class>
				<activate />
				<fastinit />
			</subwindow>

			<sub_content_top name="sub_desktop">
				<anchored height="145" />
				<class>diceselect_desktop</class>
			</sub_content_top>

			<spacer_content_bottom name="spacer_bottom" />

			<sub_content_framed_groupbox name="sub_selection">
				<class>diceselect_selection</class>
			</sub_content_framed_groupbox>

			<resize_utilitybox />
		</sheetdata>
	</windowclass>

	<windowclass name="diceselect_active">
		<frame>groupbox</frame>
		<margins control="0,0,0,5" />
		<sheetdata>
			<anchor_content_groupbox_top />

			<header_content_framed_headersimple name="header">
				<static textres="diceselect_header_active" />
				<center merge="delete" />
			</header_content_framed_headersimple>
			<button_refresh name="button_random">
				<anchored to="header" position="insidetopright" />
				<tooltip textres="diceselect_label_skin_randomize" />
				<script>
					function onButtonPress()
						DiceSkinManager.onDiceSkinRandomize();
					end
				</script>
			</button_refresh>

			<spacer_content_top />

			<area_content_top name="area_content">
				<anchor height="60" />
			</area_content_top>
			<buttoncontrol name="button">
				<anchored to="area_content" position="insidetopleft" offset="5,0" width="60" height="60" />
				<readonly />
				<script>
					function onDragStart(button, x, y, draginfo)
						return DiceSkinManager.onDiceSelectButtonDrag(draginfo, UserManager.getDiceSkin());
					end
				</script>
			</buttoncontrol>
			<simplestringc name="label">
				<anchored to="area_content" position="insidetopright" offset="5,10">
					<left parent="button" anchor="right" offset="10" />
				</anchored>
				<multilinespacing>18</multilinespacing>
			</simplestringc>
		</sheetdata>
	</windowclass>
	<windowclass name="diceselect_color">
		<frame>groupbox</frame>
		<sheetdata>
			<anchor_content_groupbox_top />

			<header_content_framed_headersimple name="header">
				<static textres="diceselect_header_color" />
				<center merge="delete" />
			</header_content_framed_headersimple>
			<button_refresh name="button_random">
				<anchored to="header" position="insidetopright" />
				<tooltip textres="diceselect_label_color_randomize" />
				<script>
					function onButtonPress()
						DiceSkinManager.onDiceColorRandomize();
					end
				</script>
			</button_refresh>

			<spacer_content_top />

			<area_content_top name="area_content">
				<anchor height="60" />
			</area_content_top>
			<colorpick name="color_body">
				<anchored to="area_content" width="45" height="45">
					<top offset="15" />
					<right anchor="center" offset="-3" />
				</anchored>
				<callback>onDiceBodyColorChanged</callback>
			</colorpick>
			<label name="label_color_body">
				<anchored to="color_body" position="above" offset="0,-2" />
				<static textres="diceselect_label_color_body" />
				<center />
				<disabled />
			</label>
			<colorpick name="color_text">
				<anchored to="area_content" width="45" height="45">
					<top offset="15" />
					<left anchor="center" offset="3" />
				</anchored>
				<callback>onDiceTextColorChanged</callback>
			</colorpick>
			<label name="label_color_text">
				<anchored to="color_text" position="above" offset="0,-2" />
				<static textres="diceselect_label_color_text" />
				<center />
				<disabled />
			</label>
			<stringc_noframe_static name="label_empty">
				<anchored to="area_content" position="insidetop" offset="0,10" />
				<multilinespacing>18</multilinespacing>
				<font>list-empty</font>
				<static textres="diceselect_empty_color" />
				<center />
				<invisible />
			</stringc_noframe_static>
		</sheetdata>
	</windowclass>
	<windowclass name="diceselect_desktop">
		<frame>groupbox</frame>
		<sheetdata>
			<anchor_content_groupbox_top />
			<anchor_content_groupbox_bottom />

			<header_content_framed_headersimple name="header">
				<static textres="diceselect_header_desktop" />
			</header_content_framed_headersimple>

			<area_content_bottom name="area_controls">
				<anchored height="30" />
			</area_content_bottom>
			<label name="label_desktop_tray_scale">
				<anchored to="area_controls" position="insidetopleft" offset="10,5" />
				<static textres="diceselect_label_desktop_tray" />
			</label>
			<button_icon name="button_desktop_tray_scaledown">
				<anchored to="label_desktop_tray_scale" position="righthigh" offset="10,0" />
				<icon normal="button_toolbar_collapse" />
				<tooltip textres="diceselect_tooltip_desktop_scaledown" />
				<tintable />
				<script>
					function onButtonPress()
						WindowManager.callOuterWindowFunction(window, "onDiceTrayScaleDown");
					end
				</script>
			</button_icon>
			<label name="label_desktop_tray_scale_value">
				<anchored to="button_desktop_tray_scaledown" position="righthigh" offset="0,0" width="50" />
				<center />
			</label>
			<button_icon name="button_desktop_tray_scaleup">
				<anchored to="label_desktop_tray_scale_value" position="righthigh" offset="0,0" />
				<icon normal="button_toolbar_expand" />
				<tooltip textres="diceselect_tooltip_desktop_scaleup" />
				<tintable />
				<script>
					function onButtonPress()
						WindowManager.callOuterWindowFunction(window, "onDiceTrayScaleUp");
					end
				</script>
			</button_icon>

			<button_icon name="button_desktop_roll_scaleup">
				<anchored to="area_controls" position="insidetopright" offset="15,5" />
				<icon normal="button_toolbar_expand" />
				<tooltip textres="diceselect_tooltip_desktop_scaleup" />
				<tintable />
				<script>
					function onButtonPress()
						WindowManager.callOuterWindowFunction(window, "onDiceRollScaleUp");
					end
				</script>
			</button_icon>
			<label name="label_desktop_roll_scale_value">
				<anchored to="button_desktop_roll_scaleup" position="lefthigh" offset="0,0" width="50" />
				<center />
			</label>
			<button_icon name="button_desktop_roll_scaledown">
				<anchored to="label_desktop_roll_scale_value" position="lefthigh" offset="0,0" />
				<icon normal="button_toolbar_collapse" />
				<tooltip textres="diceselect_tooltip_desktop_scaledown" />
				<tintable />
				<script>
					function onButtonPress()
						WindowManager.callOuterWindowFunction(window, "onDiceRollScaleDown");
					end
				</script>
			</button_icon>
			<label name="label_desktop_tray_scale">
				<anchored to="button_desktop_roll_scaledown" position="lefthigh" offset="10,0" />
				<static textres="diceselect_label_desktop_roll" />
			</label>

			<list_content name="list">
				<anchored>
					<left offset="5" />
					<right offset="-5" />
				</anchored>
				<class>diceselect_desktop_die</class>
				<columns width="45" fillwidth="true" dynamic="true" />
				<readonly />
			</list_content>
			<scrollbar_content_list />
		</sheetdata>
	</windowclass>
	<windowclass name="diceselect_desktop_die">
		<script file="utility/scripts/diceselect_desktop_die.lua" />
		<sheetdata>
			<buttoncontrol name="button">
				<anchored position="insidetopleft" offset="0,0" width="45" height="45" />
				<script>
					function onButtonPress()
						window.onButtonActivate();
					end
				</script>
			</buttoncontrol>
		</sheetdata>
	</windowclass>

	<windowclass name="diceselect_selection">
		<sheetdata>
			<anchor_content_top />
			<anchor_content_bottom />

			<header_content_framed_headersimple name="header">
				<static textres="diceselect_header_skin" />
			</header_content_framed_headersimple>
			<sub_content_top name="sub_groups">
				<class>diceselect_selection_group</class>
			</sub_content_top>
			<list_content name="list">
				<class>diceselect_selection_skin</class>
				<readonly />
				<columns width="64" fillwidth="true" dynamic="true" />
				<sortby>
					<control desc="true">owned</control>
					<control>order</control>
				</sortby>
			</list_content>
			<scrollbar_content_list />
		</sheetdata>
	</windowclass>
	<windowclass name="diceselect_selection_group">
		<margins control="0,0,0,5" />
		<sheetdata>
			<anchor_listitem_left />
			<anchor_listitem_right />

			<button_listitem_icon_left_sm name="button_prev">
				<icon>button_toolbar_page_prev</icon>
				<script>
					function onButtonPress()
						DiceSkinManager.onDiceSelectGroupPrev(WindowManager.getTopWindow(window));
					end
				</script>
			</button_listitem_icon_left_sm>
			<button_listitem_icon_right_sm name="button_next">
				<icon>button_toolbar_page_next</icon>
				<script>
					function onButtonPress()
						DiceSkinManager.onDiceSelectGroupNext(WindowManager.getTopWindow(window));
					end
				</script>
			</button_listitem_icon_right_sm>

			<label_listitem_left name="label">
				<static textres="diceselect_label_group" />
			</label_listitem_left>
			<comboboxc_listitem_center name="group">
				<unsorted />
				<script>
					function onSelect()
						DiceSkinManager.onDiceSelectGroupChanged(WindowManager.getTopWindow(window));
					end
				</script>
			</comboboxc_listitem_center>
		</sheetdata>
	</windowclass>
	<windowclass name="diceselect_selection_skin">
		<margins control="0,0,0,2" />
		<script file="utility/scripts/diceselect_skin.lua" />
		<sheetdata>
			<hnc name="order" />
			<hnc name="id" />
			<hnc name="owned" />
			<hnc name="tintable" />
			<hsc name="name" />

			<buttoncontrol name="button">
				<anchored width="60" height="60">
					<top offset="2" />
					<left anchor="center" offset="-30" />
				</anchored>
				<script>
					function onHover(bHover)
						DiceSkinManager.onDiceSelectButtonHover(bHover, window.getID());
					end
					function onButtonPress()
						DiceSkinManager.onDiceSelectButtonActivate(window.getID());
					end
					function onDragStart(button, x, y, draginfo)
						return DiceSkinManager.onDiceSelectButtonDrag(draginfo, window.getID());
					end
				</script>
			</buttoncontrol>
		</sheetdata>
	</windowclass>

	<windowclass name="diceselect_controls">
		<margins control="0,0,0,5" />
		<script>
			function onInit()
				self.onDicePanelLockChanged();
			end
			function onDicePanelLockChanged()
				button_tray_lock.setValue(DiceManager.getDicePanelLockState() and 0 or 1);
			end
		</script>
		<sheetdata>
			<button_text_toggle name="button_tray_lock">
				<anchored position="insidetopleft" offset="5,5">
					<right anchor="left" offsetpercent="33" offset="-5" />
				</anchored>
				<state textres="diceselect_button_tray_unlock" frame="buttonup" frameoffset="5,5,5,5" merge="resetandadd" />
				<state textres="diceselect_button_tray_lock" frame="buttondown" frameoffset="5,5,5,5" offset="1,1" merge="add" />
				<script>
					function onClickDown()
						return true;
					end
					function onClickRelease()
						DiceManager.toggleDicePanelLock();
						return true;
					end
				</script>
			</button_text_toggle>
			<button_text name="button_drc">
				<anchored position="insidetopright" offset="5,5">
					<left anchor="right" offsetpercent="-33" offset="5" />
				</anchored>
				<state textres="diceselect_button_drc_action" />
				<script>
					function onButtonPress()
						Interface.openWindow("drclist_action", "");
					end
				</script>
			</button_text>
			<button_text name="button_drc_actors">
				<anchored>
					<top offset="5" />
					<left anchor="center" offsetpercent="-16" offset="5" />
					<right anchor="center" offsetpercent="16" offset="-5" />
				</anchored>
				<state textres="diceselect_button_drc_actor" />
				<script>
					function onButtonPress()
						Interface.openWindow("drclist_actor", "");
					end
				</script>
			</button_text>
		</sheetdata>
	</windowclass>
</root>
